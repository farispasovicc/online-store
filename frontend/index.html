<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Clothes Store</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="assets/css/spapp.css" rel="stylesheet" />
    <link href="assets/css/styles.css" rel="stylesheet" />
  </head>

  <body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container px-5">
        <a class="navbar-brand" href="#home">ONLINE CLOTHES STORE</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link active" href="#home">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
            <li class="nav-item"><a class="nav-link" href="#products">Products</a></li>
            <li class="nav-item"><a class="nav-link" href="#cart">Cart</a></li>


            <li class="nav-item d-none" id="admin-menu">
              <a class="nav-link" style="color:#ffc107; font-weight:bold;" href="#admin-panel">
                Admin Panel
              </a>
            </li>

            <li class="nav-item" id="nav-login">
              <a class="nav-link" style="color:#0d6efd; font-weight: bold;" href="#login">Login</a>
            </li>
            <li class="nav-item" id="nav-register">
              <a class="nav-link" style="color:#0d6efd; font-weight: bolder;" href="#register">Register</a>
            </li>

            <li class="nav-item d-none" id="nav-logout">
              <a class="nav-link" style="color:#dc3545; font-weight: bold;" href="#" id="logout-btn">
                Logout
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-3 d-none" id="dashboard">
      <div class="alert alert-info">
        Welcome <strong><span id="dash-email"></span></strong>
        (Role: <strong><span id="dash-role"></span></strong>)
      </div>
    </div>

    <main id="spapp" role="main">
      <section id="home" data-load="home.html"></section>
      <section id="about" data-load="about.html"></section>
      <section id="products" data-load="products.html"></section>
      <section id="cart" data-load="cart.html"></section>
      <section id="admin-panel" data-load="admin-panel.html"></section>
      <section id="login" data-load="login.html"></section>
      <section id="register" data-load="register.html"></section>
      <section id="man" data-load="man.html"></section>
      <section id="woman" data-load="woman.html"></section>
      <section id="kids" data-load="kids.html"></section>
    </main>

    <footer class="py-5 bg-dark">
      <div class="container px-4 px-lg-5">
        <p class="m-0 text-center text-white">Made by Faris Pasovic</p>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="assets/js/jquery.spapp.min.js"></script>
    <script src="assets/js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="assets/js/utils/constants.js"></script>
    <script src="assets/js/utils/rest-client.js"></script>
    <script src="assets/js/utils/utils.js"></script>
    <script src="assets/js/services/auth-service.js"></script>
    <script src="assets/js/services/product-service.js"></script>


<script>
  if (!Utils.isLoggedIn()) {
    window.location.hash = "#login";
  } else {
    const user = Utils.getCurrentUser();

    $("#dashboard").removeClass("d-none");
    $("#dash-email").text(user.email);
    $("#dash-role").text(user.role);

    $("#nav-login").addClass("d-none");
    $("#nav-register").addClass("d-none");
    $("#nav-logout").removeClass("d-none");

    if (Utils.isAdmin()) {
      $("#admin-menu").removeClass("d-none");
    }
  }

  $("#logout-btn").on("click", function () {
    AuthService.logout();
  });

  var app = $.spapp({
    pageNotFound: "home",
    templateDir: "views/"
  });
  app.run();
</script>


  </body>
</html>
